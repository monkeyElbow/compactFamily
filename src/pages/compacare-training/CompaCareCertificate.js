import { Link } from "react-router-dom";
import { useState, useEffect } from "react";

import { Container, Row, Col, Card, Button, Alert } from "react-bootstrap";

import BannerCompaCareTraining from "./components/BannerCompaCareTraining";
import { useAuth } from "../../util/AuthContext";
import { db } from "../../util/firebase";
import CompaCareLogo from "../../graphics/CompaCareLogo";

export default function CompaCareCertificate() {
    document.title = "CompaCare Training Certificate"
  const { currentUser } = useAuth();
  const [profile, setProfile] = useState([]);
  const [error, setError] = useState("");


  useEffect(() => {
    async function fetchUser() {
      var userRef = db.collection("Users").doc(currentUser.uid);
  
      try {
        var doc = await userRef.get();
        const data = await doc.data();
        await setProfile(data)
        // console.log(profile)
        return data.profile
  
      } catch (error) {
        console.log(error)
        setError("Mr Stark, I don't feel so good.")
      }
  
    }
    if(currentUser) {
      fetchUser()
    } else { return null}
  
  }, [])

  // const printStyle = {

       
  //       transform: rotate(-90deg);
  //       transform-origin: left top;
  //       width: 100vh;
  //       overflow-x: hidden;
  //       position: absolute;
  //       top: 100%;
  //       left: 0;
  //     }
      
  // }

//   PRINT FUNC
  function printCert() {

    var css = '@page { size: landscape; }',
    head = document.head || document.getElementsByTagName('head')[0],
    style = document.createElement('style');

style.type = 'text/css';
style.media = 'print';

if (style.styleSheet){
  style.styleSheet.cssText = css;
} else {
  style.appendChild(document.createTextNode(css));
}

head.appendChild(style);

      window.print()
  }

    return (
        <>
        <div className="noprint">

<BannerCompaCareTraining />
{error && <Alert variant="danger" className="mb-4 text-center">{error}</Alert>}
        </div>

<Container className="py-3 noprint">
<p>Choose print certificate and check your printer settings such as landscape orientation and printer vs PDF export.</p>

<p>If your name is incorrect, you can edit your first and last name in the {" "}
<Link to="/compacare-training-register">edit profile page.</Link>
</p>
<Button onClick={printCert}>Print Certificate</Button>
</Container>



    <Container className="border border-5 border-dark pt-5 mt-2 d-flex flex-column justify-content-center rounded align-items-center">
        <h1>CERTIFICATE of PARTICIPATION</h1>
        <br />
        <p>THIS ACKNOWLEDGES THAT</p>

        <div className="d-flex justify-content-center border-top border-bottom pt-4 pb-3 w-50">
<h2>
        {profile.first_name} {" "}
        {profile.last_name}
</h2>
        </div>
        <p>WAS AN ACTIVE PARTICIPANT IN A NATIONAL CONSULTATION ON</p>
        <h4 className="">Community-based, Church-led, Foster Care Initiatives</h4>
        <p style={{lineHeight:"0.1rem"}}>
            <small>
            (16 hours November 30 to December 2)
            </small>
            </p>

<Row className="d-flex align-content-end justify-items-between pt-5">
    {/* <Col md={4} className="d-flex align-items-center justify-content-center p-5">

        <Container 
        style={{borderRadius:"50%"}} 
        className="
        d-flex 
        align-items-center"
        >
        <h5><strong>
        {new Date().getFullYear()}
            </strong></h5>
        </Container>
    </Col> */}
    <Col className="p-5">
        <div className="border-bottom mb-3 border-5">
<JohanSig />
        </div>
        <p className="">
            <strong>
            JOHAN MOSTERT, PHD
            </strong>
            </p>
        <p>
            <small>
            NATIONAL DIRECTOR COMPACARE
            </small>
            </p>
    </Col>
    <Col className="p-5">
    <CompaCareLogo />
    </Col>
</Row>
    </Container>

        </>
    )
}


function JohanSig() {
return(

<svg  viewBox="0 0 554 313">
  <path d="M276.4 96.1c6.3-12.4 11.8-25.2 21.1-36 17.2-19.3 27.9-9 25.7 13.6-.2 2-1.7 7.2 2.1 5.7 11.2-4.9 22.7-8 35-7.7 5.8.1 6.5-.7 8.5-6.4 3-8.6 6.3-17.4 13.2-23.7 14.8-11.5 14.6 20.9 12 28.8-1 4.7.2 6 5 7.1 6.6 1.6 13 4.3 19.5 6.8 2.6 1 3.5.5 4.3-2.3 1.6-6.2 2.9-12.5 5.2-18.5 1.7-4.7 4.5-9.1 7.3-13.4s10.8-2 7.4 3.6c-7.2 7.9-9.6 17.8-12.2 27.7-.8 3.3-3.1 8.3 1 10 6.8 3 11 9 16 13.8a54 54 0 0113.4 59.6c-4.5 8.7-11.8 15.6-17.1 23.8 8.6.7 17-1.8 25.6-2.6 5.2-.4 10.4 0 15.5-.1 8.7-.8 17.3-1.5 26-1.7 5.8-1.2 7 6.5 2.7 9.2-4.5 2.4-5.8-4.6-12.3-3.4-21 1.8-42.3-.4-62.6 5.5-8.8 4.2-18.2 1.3-27.5 2.9-6.8 1.8-14 1.9-20.9 2.6-1.3.4-2.3-.5-3.3-1.2 2.1-2.7 12.9-3.6 16.8-4.8 18.6-1.6 9.2-.5 4.8-24.2-1.7-5.9-6.2 1.6-7 4.3-1.8 4.2-3.7 22.2-11 14.3-3-5.7-8.8 2.8-21.3.6-9.2 1-17.2 8.3-22.9-3.6-4.7-7.3-15.6 19.4-27.2 7.5-8.5-10.1-6.1-5.7-17.9-3.7-7.8 2.3-9.6-6.3-15.7-3.8-4 1.7-6.1-1.3-5.3-5.1 2.5-4.9 1-9.6.2-14.6-2.3-11.6 2.6-32 15-35.9 2.3-.3 3.2-1.7 3.3-4 .5-11.4 2-23.3 10-32 7.3-9.6 7.2-20.5 6.7-31.6 0-1.4-1.4-3.6-2.6-4-7.1-1.3-20.9 20.4-23.8 26.6a378.3 378.3 0 00-24 62c-3.5 11.6-6.4 23.3-9.8 35a13.7 13.7 0 01-3 5.2c-6.8 4.6-6.3-6-5-9.9 6-19.3 11-39 15.6-58.7 2.4-12.3 8.2-32.9 4.2-44.5-3.7 2.4-5.3 8.1-7.8 11.9a191 191 0 00-16.4 53.5l-4.4 24-3 19.4a6.9 6.9 0 01-1.9 3.4c-14.3 10.2 0-39 .4-44.1a344.3 344.3 0 008.2-70c.1-1.3-.7-2.7-1-4-1 1-2.5 2-2.9 3.3-2.2 6-4.4 12-6 18.2-2.2 5-3.5 28.7-8.7 28-1.4-.6-2-2.8-1.6-4.3 1.2-10.4.7-21.1 5-30.9 2.7-6.4 8.1-30.8 15.5-31 5.8.6 5.9 8.2 6.7 12.6.8 7.3-1 15 1.4 22 5.9-5.2 8-13.2 12.3-19.6 1.5-2.6 3.5-5.1 7-4.6 3.6.5 5 3.6 5.3 6.6a138.7 138.7 0 010 26.5zm150.5 93.7c9 .7 21.7-14.7 26.6-21.9 9.2-12.4 6.3-28.6.2-41.9a53.8 53.8 0 00-22.4-26c-3.7-2-4.7-1.4-5.5 2.1l-6 28.5a6.2 6.2 0 00.5 2.3c4.7-2.5 3.2-9.7 8.2-12 5.8 6.6-9.6 24.3-10 33.2-2.2 10.6-4 21.5 1.6 31.4 1.4 2.8 3.4 4.7 6.8 4.3zM371.1 147c4.5-3 8.4-6.3 13.6-3.5 8.4 5 1.1 22.8-3 29.3-.9 2.2-9.4 10.9-3 10 4.6-2.6 17.2-8.8 17.3-14.4s-1.1-11.8.5-17.3c1.3-3.1 6.4-4 7.3.1.4 2.6.6 5.1 2 7.4 1-1.3 2.6-2.3 3-4 3.3-18.2 6.3-36.6 10.1-54.8 1.3-5.5.7-7.8-4.4-10-6-2.5-12-4.4-18-6.5-6.8-2.6-6.9 11.6-9.1 15.8q-4.5 13.6-9.3 27.2c-2.1 7.2-5.8 13.3-7 20.7zM357 79.8a65.7 65.7 0 00-29.8 8 16.1 16.1 0 00-8 10l-9.7 30.7c-3.1 6.5 9.2 5.5 14.5 16.7 2 4 3.5 4.1 6 .2 1.9-3 3.4-6 5.3-9 6.2-9.2 12 3.3 13-3.8 3.3-16.2 8.6-32 13.4-47.8 1.7-4.7-.4-5-4.7-5zm-4.3 79.7l.8.4c7-7.3 10.6-16.8 13.9-26.1 4.3-10.3 7.7-21 11.4-31.4 3-5.2 3.2-11.1 5-16.6 2-4.8-4.8-5-8-5.5a4.8 4.8 0 00-5.7 3.5c-7.7 24.5-16.4 49.9-17.4 75.7zm-55.4 14.9c4.2.4 18.5-8 15-12.9-3-4-6.3-7.8-7.7-12.7-.7-1.6-2.7-2-3.5-.2-2.9 6.6-5.7 13.2-8.4 19.9-1.3 3.3.7 5.8 4.6 5.9zm90-112.2c-.5-3.1 1-8.8-1.3-11-4.8 1.6-7.6 10-9.2 14.5-2 6.8-1 8 6.3 8.3 6.5.4 3.7-7.9 4.2-11.8zm-24 99.2c-4.2 2.8-6.3 7.7-9.1 11.7-1.8 3-1.3 6.3-.1 9.3 1.5 4.8 10.2 3.4 9.1-2a52 52 0 01.3-16.7 9.4 9.4 0 00-.2-2.3zm-25.7-11.7l-.9-.6a45.4 45.4 0 00-13 27.2 6.4 6.4 0 001.3 5.2c.6-.7 1.6-1.2 1.9-2 3.6-9.9 8.5-19.5 10.8-29.8zm44.8 6l-1.9-4c-13.3 7.6-13 43.2 2 4zm-39 4.2c-3 6.8-6.7 13.3-8.3 21 6.8-.8 11.5-12.8 8.4-21zm-23.7-3.6a16.4 16.4 0 00-7.5-13.3c-1.5-1-2.7.1-2.7 1.7 1.1 4.3 4.1 8 6.2 12 1.9 2.4 3.1 1.7 4-.5zm-19 28c3.7-.1 10-2.6 10.3-7a22.7 22.7 0 00-12.6 5.6zm-6.6-40.7c-3.3 2.5-5.1 7.4-3.7 10.2 1.7-3.3 3.8-6 3.7-10.3zM170.3 175.7c2.2-5.8 3.3-11.9 4.8-17.9 1.1-3.6.6-10.8 5.5-10.8 12 .4-5.9 31.5 5.1 43.6 2.4 3.8 4.8 2 8 3.8-3 7.6-13.6 6.7-16.6-.7-1.1-2-2-8.4-5.2-5.1-9.4 11-9-2.5-14.3 2.2-5.9 6.5-8-3-13 1.9-9.2 9.8-18 7.8-25.8-2.4-3.4-4.4-6.9 1.6-10 3.4-11.7 8.4-10.4-12-18.6-2-3.7 3.5-7.1 7.2-11 10.4-4.1 3.4-9.6 5.3-13.6 8.8A34.7 34.7 0 0057 230c-.8 8.2-1.6 16.4-3.1 24.5-1 6.5-4.6 12.5-5.3 19 1.6 0 3.3.5 4.7.1 13-4 26-8.3 39.2-12.3 5-1.6 10.6-1.4 15.6-3.5 4.5-2 8.9-3.8 14-4.4 5.9-.7 11.6-2.8 17.4-4.2.5-.1 1-.5 1.5-.5 4.1.2 7.6-1.8 11.1-3.6 1.9-.6 6.6-1.7 7.9.4 0 .7-.5 1.9-1 2-4.6 1.4-9.4 2.3-14 3.5-10.4 3.3-20.8 7-31.5 9.8-26 7.2-51.5 16-77.5 23.3a4 4 0 01-5-1.5c-.4-2.7 2.5-3.9 4.8-4.5 1.8-.6 2.5-1.6 1.6-3.5-3.6-7.8-2.3-15.7-.2-23.6 2.2-7.6 4.4-15.5 8.4-22.2 5.7-7.8 6-16.8 5.7-26-6.3-14.4-18-14.5-15.5-35.5a100 100 0 016.3-26.2C45.4 133 53 126.4 56 118c8.8-30 8.6-62.3 20.5-91.3 2.7-2.7 5-3.2 6.6.8 1 3.2-.1 6.8-.5 9.9.8 5-.6 9.5-2.8 13.7s-2.2 8.1-2 12.6c0 3.5-1.3 7-2.1 10.6-2.8 12.2-6.4 24.3-8.6 36.6-.6 3.7.2 4.4 4 4.7 28 2.4 15.2 21.1 28.7-19.2C108 72 114 46.3 129.3 25.2c3.2-6.6 12.2-4 12.7 3a4.9 4.9 0 00.7 2.5c4 5.2 3.8 11.8 5 17.8-1.4 5 .3 10 .1 14.9-1 9.7-2.4 19.4-3.8 29.1q-2.5 11.3-5.2 22.5c-.6 1.9 0 3.3 2 3.8 13.4 3.8 20.1 16.3 22 29.2.7 3.3.5 3.3 3.8 2.1 11.7-2.8.9 19.9 2.8 25.4zm-64.8-14.3l.8.4c6.4-6.4 7.2-16.2 9.6-24.5a30.1 30.1 0 0112.4-18 7 7 0 002.9-3.3c2.2-6.5 4.6-13 6.3-19.8 3.6-17 6.6-34.6 4.5-52-2-8.2-2.7-22.2-11.3-7.7-16 27.3-22 58.6-32 88.3-1.2 3.9-1.5 10 2.8 11.9 2.3-1.1 2.7-5.1 4-7.2a4.3 4.3 0 014.9-2.6c8.6 2.2-5.5 27.8-4.9 34.5zm-44.9 25.7h.1c-.4 4-1.1 9.7 4.7 8.7 4.1-.3 7.6-2 11-4.3s4.8-5.2 4.8-9.2a141.9 141.9 0 017.2-45.4c3.4-9.7-10.9-13.6-18.1-13-3.4.2-4.6 1.6-4.9 5L60.6 187zm73.7 3.2c5.6-.4 11.2-6.8 10.6-12.3-1.5-12.1-1-24 4.7-35 1.3-2.8 2.4-5.7.5-8.6-1.7-4.1-14.1-11.8-15.9-4.9-1.2 5.3-7.3 11.8-3.5 16.9 6.3 9 .2 20.8-4.8 29-4.6 6.2 2.6 13.2 8.4 15zm-78-50.5h-.7c-4 7.1-6.8 15.2-9.6 23-1.1 3.4-.7 7.4-.9 11.2 0 .6.8 1.1 1.2 1.7 4.2-2.3 0-9.8 5.4-11.1 2.8-.6 3.7-2.5 3.9-4.8.1-6.6 1.7-13.4.7-20zM113 177c-.4-1.3-.8-9.7-4-5.7-2.8 3.7-7.6 7.8-5.3 12.8a3.6 3.6 0 002.9 1.8c3.2-.3 6.5-4.7 6.4-8.9zm-65 64l-1-.3c-3.6 5.7-8 17.2-4.4 23.7.8-1.2 2.1-2 2.4-3.4 1.3-6.6 3.6-13.1 3-20zM91 165c3.4-4.8 4.7-13.7 2.4-16.3-1.9 5.3-2 10.5-2.4 16.4zm31.5 1.8c4-2.3 5-12.3 1.3-9.8-2 1.7-2.8 7.2-1.3 9.8zM54 185.7l-1.6-3.2c-2.5 2.6-2.7 3.3-.3 6.1z"/>
  <path d="M326.2 208.8c6.6-2.8 13.4-3.2 20.2-4.8a7.3 7.3 0 012.8-.2c4.8 1 9-.5 13.4-2.1 3.8-1.3 8.9-2.7 12 .5-2.7 4.1-11.3 3-16 3.5-10.8 0-21.7 6.9-32.4 3zM275.3 217l4.4 2c-1.2 1-2.3 2.6-3.7 3-3.6.5-8 2.3-11.2-.4 2-4 6.6-3.3 10.5-4.7zM195.5 237.9l-9.4 2.5c-3.2.4-7.7 3.5-10.3 1 1.4-3.3 6.8-2.2 9.9-3.2a38 38 0 019.5-1.8zM530.5 197.7c5.5.2 4 8.3-.9 8-5.3 0-3.6-8.4.9-8zM232.3 229.5c-1.7.2-21.6 7.2-16.5 1.4 4.4-1.6 9.4-1.7 14-2.7a8.6 8.6 0 012.4.3zM251.6 223.3c2.5-.1 5.7-2.4 7.6 0-1.4 2.7-5 1.1-7.5 1.5zM168.3 246l-2.5-2.5c2.4-1.7 3.3-2.8 5.9-.5zM203.9 237l-2.2-1.7c2-1 3.3-2.9 5.2-.5zM241.1 228.6L239 227c1.8-1.1 3.1-2.6 5-.7zM302 216l-2.2-1.8c2-1.3 3-2.2 5.1-.4zM316.6 210.6l3.3-.3.1 1.3-3.3.3z"/>
</svg>
   
) 
}